"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_src_app_HomePageContent_tsx",{

/***/ "(app-pages-browser)/./src/app/HomePageContent.tsx":
/*!*************************************!*\
  !*** ./src/app/HomePageContent.tsx ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ HomePageContent)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./actions */ \"(app-pages-browser)/./src/app/actions.ts\");\n/* harmony import */ var _components_app_main_layout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/app/main-layout */ \"(app-pages-browser)/./src/components/app/main-layout.tsx\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/firebase */ \"(app-pages-browser)/./src/firebase/index.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _hooks_use_pwa_install__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/hooks/use-pwa-install */ \"(app-pages-browser)/./src/hooks/use-pwa-install.tsx\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\nfunction HomePageContent() {\n    _s();\n    // State for UI and content\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('idle');\n    const [activeContent, setActiveContent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [errorMessage, setErrorMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('plans');\n    const [confettiTrigger, setConfettiTrigger] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // State for editing content\n    const [editingId, setEditingId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [editingTitle, setEditingTitle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    // State for data history\n    const [planHistory, setPlanHistory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [itineraryHistory, setItineraryHistory] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // State for authentication and system settings\n    const { user, isUserLoading } = (0,_firebase__WEBPACK_IMPORTED_MODULE_5__.useUser)();\n    const auth = (0,_firebase__WEBPACK_IMPORTED_MODULE_5__.useAuth)();\n    const [appTheme, setAppTheme] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('light');\n    const [colorTheme, setColorTheme] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('purple');\n    const [isSettingsOpen, setIsSettingsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isAuthDialogOpen, setIsAuthDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [notificationsEnabled, setNotificationsEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { isInstallable, promptInstall } = (0,_hooks_use_pwa_install__WEBPACK_IMPORTED_MODULE_7__.usePWAInstall)();\n    // Refs for media and recording\n    const mediaRecorderRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioChunksRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const recordingModeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)('newContent');\n    const activeTaskRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioStream = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_2__.useToast)();\n    const firestore = (0,_firebase__WEBPACK_IMPORTED_MODULE_5__.useFirestore)();\n    // --- Start of Effects ---\n    // Anonymous sign-in effect\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isUserLoading && !user && auth) {\n            (0,firebase_auth__WEBPACK_IMPORTED_MODULE_8__.signInAnonymously)(auth).catch((error)=>{\n                console.warn(\"Anonymous sign-in failed:\", error);\n                toast({\n                    variant: \"destructive\",\n                    title: \"Offline Mode\",\n                    description: \"Could not connect to sync services. Your work will be saved locally.\"\n                });\n            });\n        }\n    }, [\n        isUserLoading,\n        user,\n        auth,\n        toast\n    ]);\n    // Data Fetching Effect (triggered by user change)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (user) {\n            fetchHistoryFromFirestore(user.uid);\n        } else {\n            // Clear history if user signs out\n            setPlanHistory([]);\n            setItineraryHistory([]);\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        user\n    ]);\n    // Theme Effects\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const storedTheme = localStorage.getItem('theme');\n        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n        const initialTheme = storedTheme || (prefersDark ? 'dark' : 'light');\n        setAppTheme(initialTheme);\n        const storedColorTheme = localStorage.getItem('colorTheme');\n        if (storedColorTheme) setColorTheme(storedColorTheme);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        document.documentElement.classList.remove('dark', 'light');\n        document.documentElement.classList.add(appTheme);\n        localStorage.setItem('theme', appTheme);\n    }, [\n        appTheme\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        document.body.classList.remove('theme-purple', 'theme-mint', 'theme-red', 'theme-blue');\n        document.body.classList.add(\"theme-\".concat(colorTheme));\n        localStorage.setItem('colorTheme', colorTheme);\n    }, [\n        colorTheme\n    ]);\n    // --- End of Effects ---\n    // --- Start of Handlers ---\n    const handleSignUp = async (values)=>{\n        if (!auth) return {\n            error: \"Auth not ready\"\n        };\n        try {\n            if (auth.currentUser && auth.currentUser.isAnonymous) {\n                const credential = firebase_auth__WEBPACK_IMPORTED_MODULE_8__.EmailAuthProvider.credential(values.email, values.password);\n                await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_8__.linkWithCredential)(auth.currentUser, credential);\n                toast({\n                    description: \"Account successfully linked!\"\n                });\n                return {\n                    user: auth.currentUser\n                };\n            } else {\n                const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_8__.createUserWithEmailAndPassword)(auth, values.email, values.password);\n                toast({\n                    description: \"Welcome! Your account has been created.\"\n                });\n                return {\n                    user: userCredential.user\n                };\n            }\n        } catch (e) {\n            toast({\n                variant: 'destructive',\n                title: 'Sign Up Failed',\n                description: e.message\n            });\n            return {\n                error: e.message\n            };\n        }\n    };\n    const handleSignIn = async (values)=>{\n        if (!auth) return {\n            error: \"Auth not ready\"\n        };\n        try {\n            const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_8__.signInWithEmailAndPassword)(auth, values.email, values.password);\n            toast({\n                description: \"You're signed in.\"\n            });\n            return {\n                user: userCredential.user\n            };\n        } catch (e) {\n            toast({\n                variant: 'destructive',\n                title: 'Sign In Failed',\n                description: e.message\n            });\n            return {\n                error: e.message\n            };\n        }\n    };\n    const handleSignOut = async ()=>{\n        if (!auth) return;\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_8__.signOut)(auth);\n            toast({\n                description: \"You have been signed out.\"\n            });\n        } catch (e) {\n            toast({\n                variant: 'destructive',\n                title: 'Sign Out Failed',\n                description: e.message\n            });\n        }\n    };\n    const toggleTheme = ()=>{\n        setAppTheme((prevTheme)=>prevTheme === 'light' ? 'dark' : 'light');\n    };\n    const handleNotificationToggle = async ()=>{\n        if (!(\"Notification\" in window) || !(\"serviceWorker\" in navigator)) {\n            toast({\n                variant: 'destructive',\n                description: \"This browser does not support push notifications.\"\n            });\n            return;\n        }\n        if (notificationsEnabled) {\n            toast({\n                title: \"Notifications are managed in your browser\",\n                description: \"To turn off notifications, please manage them in your browser or system settings.\"\n            });\n            return;\n        }\n        try {\n            const permission = await Notification.requestPermission();\n            if (permission === 'granted') {\n                setNotificationsEnabled(true);\n                toast({\n                    description: \"Notifications have been enabled.\"\n                });\n            } else {\n                setNotificationsEnabled(false);\n                toast({\n                    variant: 'destructive',\n                    title: \"Permission Denied\",\n                    description: \"You've disabled notifications. To enable them, please go to your browser settings.\"\n                });\n            }\n        } catch (error) {\n            console.error(\"Error requesting notification permission:\", error);\n            setNotificationsEnabled(false);\n            toast({\n                variant: 'destructive',\n                title: 'Error',\n                description: 'An unexpected error occurred while requesting permissions.'\n            });\n        }\n    };\n    const fetchHistoryFromFirestore = async (userId)=>{\n        if (!firestore || !user) {\n            console.error(\"Firestore is not initialized or user is not authenticated.\");\n            return;\n        }\n        try {\n            const planQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.collection)(firestore, \"users/\".concat(userId, \"/plans\")), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.orderBy)(\"createdAt\", \"desc\"));\n            const planSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.getDocs)(planQuery);\n            const plans = planSnapshot.docs.map((doc)=>doc.data());\n            setPlanHistory(plans);\n            const itineraryQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.collection)(firestore, \"users/\".concat(userId, \"/itineraries\")), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.orderBy)(\"createdAt\", \"desc\"));\n            const itinerarySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.getDocs)(itineraryQuery);\n            const itineraries = itinerarySnapshot.docs.map((doc)=>doc.data());\n            setItineraryHistory(itineraries);\n        } catch (error) {\n            console.error(\"Error fetching history from Firestore: \", error);\n            toast({\n                variant: \"destructive\",\n                title: \"Error Loading Data\",\n                description: \"Could not load your saved content. Check Firestore rules.\"\n            });\n        }\n    };\n    const savePlan = async (plan)=>{\n        const isNewPlan = !planHistory.some((p)=>p.id === plan.id);\n        if (isNewPlan) {\n            setPlanHistory((prev)=>[\n                    plan,\n                    ...prev\n                ]);\n        } else {\n            setPlanHistory((prev)=>prev.map((p)=>p.id === plan.id ? plan : p));\n        }\n        if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) === 'plan' && activeContent.data.id === plan.id) {\n            setActiveContent({\n                type: 'plan',\n                data: plan\n            });\n        }\n        if (!firestore || !user) return;\n        // Save to private user collection\n        const userPlanRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.doc)(firestore, \"users/\".concat(user.uid, \"/plans\"), plan.id);\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.setDoc)(userPlanRef, plan, {\n            merge: true\n        }).catch(async (serverError)=>{\n            const permissionError = new _firebase__WEBPACK_IMPORTED_MODULE_5__.FirestorePermissionError({\n                path: userPlanRef.path,\n                operation: 'write',\n                requestResourceData: plan\n            });\n            _firebase__WEBPACK_IMPORTED_MODULE_5__.errorEmitter.emit('permission-error', permissionError);\n        });\n        // Save to public shared collection\n        const sharedPlanRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.doc)(firestore, \"shared_plans\", plan.id);\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.setDoc)(sharedPlanRef, plan, {\n            merge: true\n        }).catch(async (serverError)=>{\n            // This error is less critical to the user, so we can log it.\n            console.error(\"Could not save to shared collection\", serverError);\n        });\n    };\n    const saveItinerary = async (itinerary)=>{\n        const isNewItinerary = !itineraryHistory.some((i)=>i.id === itinerary.id);\n        if (isNewItinerary) {\n            setItineraryHistory((prev)=>[\n                    itinerary,\n                    ...prev\n                ]);\n        } else {\n            setItineraryHistory((prev)=>prev.map((i)=>i.id === itinerary.id ? itinerary : i));\n        }\n        if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) === 'itinerary' && activeContent.data.id === itinerary.id) {\n            setActiveContent({\n                type: 'itinerary',\n                data: itinerary\n            });\n        }\n        if (!firestore || !user) return;\n        // Save to private user collection\n        const userItineraryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.doc)(firestore, \"users/\".concat(user.uid, \"/itineraries\"), itinerary.id);\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.setDoc)(userItineraryRef, itinerary, {\n            merge: true\n        }).catch(async (serverError)=>{\n            const permissionError = new _firebase__WEBPACK_IMPORTED_MODULE_5__.FirestorePermissionError({\n                path: userItineraryRef.path,\n                operation: 'write',\n                requestResourceData: itinerary\n            });\n            _firebase__WEBPACK_IMPORTED_MODULE_5__.errorEmitter.emit('permission-error', permissionError);\n        });\n        // Save to public shared collection\n        const sharedItineraryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.doc)(firestore, \"shared_itineraries\", itinerary.id);\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.setDoc)(sharedItineraryRef, itinerary, {\n            merge: true\n        }).catch(async (serverError)=>{\n            // This error is less critical to the user, so we can log it.\n            console.error(\"Could not save to shared collection\", serverError);\n        });\n    };\n    const handleStartRecording = async (mode, task)=>{\n        recordingModeRef.current = mode;\n        if (mode === 'subtask' && task) {\n            activeTaskRef.current = task;\n        } else {\n            activeTaskRef.current = null;\n        }\n        setErrorMessage('');\n        if (mode === 'newContent') setActiveContent(null);\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({\n                audio: true\n            });\n            audioStream.current = stream;\n            setStatus('recording');\n            mediaRecorderRef.current = new MediaRecorder(stream);\n            mediaRecorderRef.current.addEventListener('dataavailable', (event)=>{\n                audioChunksRef.current.push(event.data);\n            });\n            mediaRecorderRef.current.start();\n        } catch (err) {\n            console.error('Error accessing microphone:', err);\n            setErrorMessage('Microphone access denied. Please allow microphone access in your browser settings.');\n            setStatus('error');\n        }\n    };\n    const handleStopRecording = ()=>{\n        if (mediaRecorderRef.current) {\n            mediaRecorderRef.current.addEventListener('stop', async ()=>{\n                const audioBlob = new Blob(audioChunksRef.current, {\n                    type: 'audio/webm'\n                });\n                audioChunksRef.current = [];\n                setStatus('processing');\n                if (audioStream.current) {\n                    audioStream.current.getTracks().forEach((track)=>track.stop());\n                    audioStream.current = null;\n                }\n                const reader = new FileReader();\n                reader.readAsDataURL(audioBlob);\n                reader.onloadend = async ()=>{\n                    const audioDataUri = reader.result;\n                    switch(recordingModeRef.current){\n                        case 'newContent':\n                            {\n                                var _result_content, _result_content1;\n                                const result = await (0,_actions__WEBPACK_IMPORTED_MODULE_3__.generateContentFromVoice)({\n                                    audioDataUri,\n                                    context: activeContent === null || activeContent === void 0 ? void 0 : activeContent.type\n                                });\n                                if (!result) {\n                                    setErrorMessage('An unexpected response was received from the server.');\n                                    setStatus('error');\n                                } else if (result.error) {\n                                    setErrorMessage(result.error);\n                                    setStatus('error');\n                                } else if (((_result_content = result.content) === null || _result_content === void 0 ? void 0 : _result_content.type) === 'plan' && result.content.data) {\n                                    if (!user) {\n                                        setErrorMessage(\"You must be logged in to create a plan.\");\n                                        setStatus('error');\n                                        break;\n                                    }\n                                    const newPlan = {\n                                        ...result.content.data,\n                                        id: \"plan-\".concat(Date.now()),\n                                        createdAt: new Date().toISOString(),\n                                        updatedAt: new Date().toISOString(),\n                                        transcription: result.transcription || '',\n                                        userId: user.uid\n                                    };\n                                    setActiveContent({\n                                        type: 'plan',\n                                        data: newPlan\n                                    });\n                                    savePlan(newPlan);\n                                    setStatus('success');\n                                    setActiveTab('plans');\n                                } else if (((_result_content1 = result.content) === null || _result_content1 === void 0 ? void 0 : _result_content1.type) === 'itinerary' && result.content.data) {\n                                    if (!user) {\n                                        setErrorMessage(\"You must be logged in to create an itinerary.\");\n                                        setStatus('error');\n                                        break;\n                                    }\n                                    const newItinerary = {\n                                        ...result.content.data,\n                                        id: \"itinerary-\".concat(Date.now()),\n                                        createdAt: new Date().toISOString(),\n                                        updatedAt: new Date().toISOString(),\n                                        transcription: result.transcription || '',\n                                        userId: user.uid\n                                    };\n                                    setActiveContent({\n                                        type: 'itinerary',\n                                        data: newItinerary\n                                    });\n                                    saveItinerary(newItinerary);\n                                    setStatus('success');\n                                    setActiveTab('itineraries');\n                                } else {\n                                    setErrorMessage(\"Sorry, I couldn't determine whether to create a plan or an itinerary. Please try again.\");\n                                    setStatus('error');\n                                }\n                                break;\n                            }\n                        case 'updatePlan':\n                            {\n                                if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) !== 'plan') break;\n                                const result = await (0,_actions__WEBPACK_IMPORTED_MODULE_3__.updatePlanFromVoice)({\n                                    audioDataUri,\n                                    existingPlan: activeContent.data\n                                });\n                                if (!result) {\n                                    setErrorMessage('An unexpected response was received from the server.');\n                                    setStatus('error');\n                                } else if (result.error) {\n                                    setErrorMessage(result.error);\n                                    setStatus('error');\n                                } else if (result.updatedPlan) {\n                                    const updatedPlan = {\n                                        ...activeContent.data,\n                                        ...result.updatedPlan,\n                                        updatedAt: new Date().toISOString(),\n                                        transcription: result.transcription || ''\n                                    };\n                                    savePlan(updatedPlan);\n                                    setStatus('success');\n                                }\n                                break;\n                            }\n                        case 'updateItinerary':\n                            {\n                                if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) !== 'itinerary') break;\n                                const result = await (0,_actions__WEBPACK_IMPORTED_MODULE_3__.updateItineraryFromVoice)({\n                                    audioDataUri,\n                                    existingItinerary: activeContent.data\n                                });\n                                if (!result) {\n                                    setErrorMessage('An unexpected response was received from the server.');\n                                    setStatus('error');\n                                } else if (result.error) {\n                                    setErrorMessage(result.error);\n                                    setStatus('error');\n                                } else if (result.updatedItinerary) {\n                                    const updatedItinerary = {\n                                        ...activeContent.data,\n                                        ...result.updatedItinerary,\n                                        updatedAt: new Date().toISOString(),\n                                        transcription: result.transcription || ''\n                                    };\n                                    saveItinerary(updatedItinerary);\n                                    setStatus('success');\n                                }\n                                break;\n                            }\n                        case 'subtask':\n                            {\n                                if (!activeTaskRef.current || (activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) !== 'plan') break;\n                                const result = await (0,_actions__WEBPACK_IMPORTED_MODULE_3__.addSubtasksFromVoice)({\n                                    audioDataUri,\n                                    existingTask: activeTaskRef.current\n                                });\n                                if (!result) {\n                                    setErrorMessage('An unexpected response was received from the server.');\n                                    setStatus('error');\n                                } else if (result.error) {\n                                    setErrorMessage(result.error);\n                                    setStatus('error');\n                                } else if (result.updatedTask) {\n                                    const newActivePlan = {\n                                        ...activeContent.data\n                                    };\n                                    newActivePlan.categories = newActivePlan.categories.map((c)=>({\n                                            ...c,\n                                            tasks: c.tasks.map((t)=>{\n                                                var _result_updatedTask;\n                                                return t.id === ((_result_updatedTask = result.updatedTask) === null || _result_updatedTask === void 0 ? void 0 : _result_updatedTask.id) ? result.updatedTask : t;\n                                            })\n                                        }));\n                                    newActivePlan.updatedAt = new Date().toISOString();\n                                    savePlan(newActivePlan);\n                                    setStatus('success');\n                                }\n                                break;\n                            }\n                    }\n                };\n            });\n            mediaRecorderRef.current.stop();\n        }\n    };\n    const handleTaskStatusChange = (categoryIndex, taskIndex, newStatus)=>{\n        if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) !== 'plan') return;\n        const updatedPlan = {\n            ...activeContent.data\n        };\n        const task = updatedPlan.categories[categoryIndex].tasks[taskIndex];\n        if (newStatus === 'Done' && task.status !== 'Done') setConfettiTrigger({\n            id: task.id,\n            timestamp: Date.now()\n        });\n        task.status = newStatus;\n        updatedPlan.updatedAt = new Date().toISOString();\n        savePlan(updatedPlan);\n    };\n    const handleSubTaskStatusChange = (categoryIndex, taskIndex, subTaskIndex, completed)=>{\n        if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) !== 'plan') return;\n        const updatedPlan = {\n            ...activeContent.data\n        };\n        if (updatedPlan.categories[categoryIndex].tasks[taskIndex].subtasks) {\n            const subtask = updatedPlan.categories[categoryIndex].tasks[taskIndex].subtasks[subTaskIndex];\n            if (completed && !subtask.completed) setConfettiTrigger({\n                id: subtask.id,\n                timestamp: Date.now()\n            });\n            subtask.completed = completed;\n            updatedPlan.updatedAt = new Date().toISOString();\n            savePlan(updatedPlan);\n        }\n    };\n    const handleEditTitle = (content)=>{\n        setEditingId(content.id);\n        setEditingTitle(content.title);\n    };\n    const handleSaveTitle = ()=>{\n        if (!editingId) return;\n        if (activeTab === 'plans' && (activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) === 'plan') {\n            const updatedPlan = {\n                ...activeContent.data,\n                title: editingTitle,\n                updatedAt: new Date().toISOString()\n            };\n            savePlan(updatedPlan);\n        } else if (activeTab === 'itineraries' && (activeContent === null || activeContent === void 0 ? void 0 : activeContent.type) === 'itinerary') {\n            const updatedItinerary = {\n                ...activeContent.data,\n                title: editingTitle,\n                updatedAt: new Date().toISOString()\n            };\n            saveItinerary(updatedItinerary);\n        }\n        setEditingId(null);\n        setEditingTitle('');\n    };\n    const resetToIdle = ()=>{\n        setStatus('idle');\n        setActiveContent(null);\n        setErrorMessage('');\n    };\n    const handleSelectPlanFromHistory = (plan)=>{\n        setActiveContent({\n            type: 'plan',\n            data: plan\n        });\n        setStatus('success');\n        setActiveTab('plans');\n    };\n    const handleSelectItineraryFromHistory = (itinerary)=>{\n        setActiveContent({\n            type: 'itinerary',\n            data: itinerary\n        });\n        setStatus('success');\n        setActiveTab('itineraries');\n    };\n    const handleDeletePlan = async (e, planId)=>{\n        e.stopPropagation();\n        if (!firestore || !user) return;\n        setPlanHistory((prev)=>prev.filter((p)=>p.id !== planId));\n        if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.data.id) === planId) resetToIdle();\n        const planRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.doc)(firestore, \"users/\".concat(user.uid, \"/plans\"), planId);\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.deleteDoc)(planRef).catch(async (serverError)=>{\n            if (user) fetchHistoryFromFirestore(user.uid); // Refetch to restore optimistic update\n            const permissionError = new _firebase__WEBPACK_IMPORTED_MODULE_5__.FirestorePermissionError({\n                path: planRef.path,\n                operation: 'delete'\n            });\n            _firebase__WEBPACK_IMPORTED_MODULE_5__.errorEmitter.emit('permission-error', permissionError);\n        });\n    };\n    const handleDeleteItinerary = async (e, itineraryId)=>{\n        e.stopPropagation();\n        if (!firestore || !user) return;\n        setItineraryHistory((prev)=>prev.filter((i)=>i.id !== itineraryId));\n        if ((activeContent === null || activeContent === void 0 ? void 0 : activeContent.data.id) === itineraryId) resetToIdle();\n        const itineraryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.doc)(firestore, \"users/\".concat(user.uid, \"/itineraries\"), itineraryId);\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_6__.deleteDoc)(itineraryRef).catch(async (serverError)=>{\n            if (user) fetchHistoryFromFirestore(user.uid); // Refetch to restore optimistic update\n            const permissionError = new _firebase__WEBPACK_IMPORTED_MODULE_5__.FirestorePermissionError({\n                path: itineraryRef.path,\n                operation: 'delete'\n            });\n            _firebase__WEBPACK_IMPORTED_MODULE_5__.errorEmitter.emit('permission-error', permissionError);\n        });\n    };\n    if (!firestore || !auth) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex flex-col items-center justify-center min-h-screen w-full\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-4 h-4 rounded-full bg-primary animate-pulse\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/HomePageContent.tsx\",\n                            lineNumber: 517,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-4 h-4 rounded-full bg-primary animate-pulse [animation-delay:0.2s]\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/HomePageContent.tsx\",\n                            lineNumber: 518,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-4 h-4 rounded-full bg-primary animate-pulse [animation-delay:0.4s]\"\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/HomePageContent.tsx\",\n                            lineNumber: 519,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/user/studio/src/app/HomePageContent.tsx\",\n                    lineNumber: 516,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-muted-foreground\",\n                    children: \"Initializing...\"\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/HomePageContent.tsx\",\n                    lineNumber: 521,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/user/studio/src/app/HomePageContent.tsx\",\n            lineNumber: 515,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_app_main_layout__WEBPACK_IMPORTED_MODULE_4__.MainLayout, {\n        user: user,\n        isAuthReady: !isUserLoading,\n        planHistory: planHistory,\n        itineraryHistory: itineraryHistory,\n        activeTab: activeTab,\n        setActiveTab: setActiveTab,\n        onSelectPlan: handleSelectPlanFromHistory,\n        onSelectItinerary: handleSelectItineraryFromHistory,\n        onDeletePlan: handleDeletePlan,\n        onDeleteItinerary: handleDeleteItinerary,\n        appTheme: appTheme,\n        toggleTheme: toggleTheme,\n        colorTheme: colorTheme,\n        setColorTheme: setColorTheme,\n        isSettingsOpen: isSettingsOpen,\n        setIsSettingsOpen: setIsSettingsOpen,\n        isAuthDialogOpen: isAuthDialogOpen,\n        setIsAuthDialogOpen: setIsAuthDialogOpen,\n        notificationsEnabled: notificationsEnabled,\n        onNotificationToggle: handleNotificationToggle,\n        isInstallable: isInstallable,\n        onInstall: promptInstall,\n        status: status,\n        activeContent: activeContent,\n        errorMessage: errorMessage,\n        setStatus: setStatus,\n        recordingModeRef: recordingModeRef,\n        handleStopRecording: handleStopRecording,\n        handleStartRecording: handleStartRecording,\n        audioStream: audioStream.current,\n        handleTaskStatusChange: handleTaskStatusChange,\n        handleSubTaskStatusChange: handleSubTaskStatusChange,\n        editingId: editingId,\n        editingTitle: editingTitle,\n        setEditingTitle: setEditingTitle,\n        handleEditTitle: handleEditTitle,\n        handleSaveTitle: handleSaveTitle,\n        resetToIdle: resetToIdle,\n        toast: toast,\n        confettiTrigger: confettiTrigger,\n        saveItinerary: saveItinerary,\n        onSignUp: handleSignUp,\n        onSignIn: handleSignIn,\n        onSignOut: handleSignOut\n    }, void 0, false, {\n        fileName: \"/home/user/studio/src/app/HomePageContent.tsx\",\n        lineNumber: 527,\n        columnNumber: 5\n    }, this);\n}\n_s(HomePageContent, \"O1+Nr7qnmFvDjpC6tgMiB4oNGBc=\", false, function() {\n    return [\n        _firebase__WEBPACK_IMPORTED_MODULE_5__.useUser,\n        _firebase__WEBPACK_IMPORTED_MODULE_5__.useAuth,\n        _hooks_use_pwa_install__WEBPACK_IMPORTED_MODULE_7__.usePWAInstall,\n        _hooks_use_toast__WEBPACK_IMPORTED_MODULE_2__.useToast,\n        _firebase__WEBPACK_IMPORTED_MODULE_5__.useFirestore\n    ];\n});\n_c = HomePageContent;\nvar _c;\n$RefreshReg$(_c, \"HomePageContent\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvSG9tZVBhZ2VDb250ZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBR29EO0FBQ1A7QUFDZ0c7QUFDbkY7QUFDaUM7QUFDMEI7QUFDN0Q7QUFDc0c7QUFDekg7QUFnQnRCLFNBQVM0Qjs7SUFDdEIsMkJBQTJCO0lBQzNCLE1BQU0sQ0FBQ0MsUUFBUUMsVUFBVSxHQUFHOUIsK0NBQVFBLENBQVM7SUFDN0MsTUFBTSxDQUFDK0IsZUFBZUMsaUJBQWlCLEdBQUdoQywrQ0FBUUEsQ0FBZ0I7SUFDbEUsTUFBTSxDQUFDaUMsY0FBY0MsZ0JBQWdCLEdBQUdsQywrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUNtQyxXQUFXQyxhQUFhLEdBQUdwQywrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNxQyxpQkFBaUJDLG1CQUFtQixHQUFHdEMsK0NBQVFBLENBQWtCO0lBRXhFLDRCQUE0QjtJQUM1QixNQUFNLENBQUN1QyxXQUFXQyxhQUFhLEdBQUd4QywrQ0FBUUEsQ0FBZ0I7SUFDMUQsTUFBTSxDQUFDeUMsY0FBY0MsZ0JBQWdCLEdBQUcxQywrQ0FBUUEsQ0FBQztJQUVqRCx5QkFBeUI7SUFDekIsTUFBTSxDQUFDMkMsYUFBYUMsZUFBZSxHQUFHNUMsK0NBQVFBLENBQWUsRUFBRTtJQUMvRCxNQUFNLENBQUM2QyxrQkFBa0JDLG9CQUFvQixHQUFHOUMsK0NBQVFBLENBQW9CLEVBQUU7SUFFOUUsK0NBQStDO0lBQy9DLE1BQU0sRUFBRStDLElBQUksRUFBRUMsYUFBYSxFQUFFLEdBQUd0QyxrREFBT0E7SUFDdkMsTUFBTXVDLE9BQU90QixrREFBT0E7SUFDcEIsTUFBTSxDQUFDdUIsVUFBVUMsWUFBWSxHQUFHbkQsK0NBQVFBLENBQVc7SUFDbkQsTUFBTSxDQUFDb0QsWUFBWUMsY0FBYyxHQUFHckQsK0NBQVFBLENBQWE7SUFDekQsTUFBTSxDQUFDc0QsZ0JBQWdCQyxrQkFBa0IsR0FBR3ZELCtDQUFR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QUFlQTtRQUNmRSxjQUFjQTtRQUNkSCxXQUFXQTtRQUNYa0Msa0JBQWtCQTtRQUNsQmdHLHFCQUFxQkE7UUFDckJkLHNCQUFzQkE7UUFDdEJoRixhQUFhQSxZQUFZbUYsT0FBTztRQUNoQzZDLHdCQUF3QkE7UUFDeEJLLDJCQUEyQkE7UUFDM0JoSyxXQUFXQTtRQUNYRSxjQUFjQTtRQUNkQyxpQkFBaUJBO1FBQ2pCa0ssaUJBQWlCQTtRQUNqQkMsaUJBQWlCQTtRQUNqQkMsYUFBYUE7UUFDYjNJLE9BQU9BO1FBQ1A5QixpQkFBaUJBO1FBQ2pCdUcsZUFBZUE7UUFDZnNGLFVBQVVwSTtRQUNWcUksVUFBVTNIO1FBQ1Y0SCxXQUFXM0g7Ozs7OztBQUdqQjtHQWxpQndCN0U7O1FBaUJVbEIsOENBQU9BO1FBQzFCaUIsOENBQU9BO1FBTXFCUCxpRUFBYUE7UUFTcENqQixzREFBUUE7UUFDUk0sbURBQVlBOzs7S0FsQ1JtQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBwL0hvbWVQYWdlQ29udGVudC50c3g/MDkzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2UgY2xpZW50JztcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2hvb2tzL3VzZS10b2FzdCc7XG5pbXBvcnQgeyBhZGRTdWJ0YXNrc0Zyb21Wb2ljZSwgZmV0Y2hVc2VySW5zaWdodHMsIHVwZGF0ZVBsYW5Gcm9tVm9pY2UsIHVwZGF0ZUl0aW5lcmFyeUZyb21Wb2ljZSwgZ2VuZXJhdGVDb250ZW50RnJvbVZvaWNlIH0gZnJvbSAnLi9hY3Rpb25zJztcbmltcG9ydCB7IE1haW5MYXlvdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvYXBwL21haW4tbGF5b3V0JztcbmltcG9ydCB7IHVzZUZpcmVzdG9yZSwgdXNlVXNlciwgZXJyb3JFbWl0dGVyLCBGaXJlc3RvcmVQZXJtaXNzaW9uRXJyb3IgfSBmcm9tICdAL2ZpcmViYXNlJztcbmltcG9ydCB7IGNvbGxlY3Rpb24sIGRvYywgZ2V0RG9jLCBzZXREb2MsIGRlbGV0ZURvYywgcXVlcnksIG9yZGVyQnksIGdldERvY3MsIHdyaXRlQmF0Y2ggfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyB1c2VQV0FJbnN0YWxsIH0gZnJvbSAnQC9ob29rcy91c2UtcHdhLWluc3RhbGwnO1xuaW1wb3J0IHsgc2lnbkluQW5vbnltb3VzbHksIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNpZ25PdXQsIGxpbmtXaXRoQ3JlZGVudGlhbCwgRW1haWxBdXRoUHJvdmlkZXIgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICdAL2ZpcmViYXNlJztcbmltcG9ydCB0eXBlIHsgXG4gICAgU3RvcmVkUGxhbiwgXG4gICAgU3RvcmVkSXRpbmVyYXJ5LCBcbiAgICBHZW5lcmF0ZVBsYW5Gcm9tVGV4dE91dHB1dCxcbiAgICBHZW5lcmF0ZUl0aW5lcmFyeUZyb21UZXh0T3V0cHV0LFxuICAgIFRhc2ssXG4gICAgU3RhdHVzLFxuICAgIEFwcFRoZW1lLFxuICAgIENvbG9yVGhlbWUsXG4gICAgVGFza1N0YXR1cyxcbiAgICBSZWNvcmRpbmdNb2RlLFxuICAgIEFjdGl2ZUNvbnRlbnQsXG4gICAgQ29uZmV0dGlUcmlnZ2VyXG59IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb21lUGFnZUNvbnRlbnQoKSB7XG4gIC8vIFN0YXRlIGZvciBVSSBhbmQgY29udGVudFxuICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGU8U3RhdHVzPignaWRsZScpO1xuICBjb25zdCBbYWN0aXZlQ29udGVudCwgc2V0QWN0aXZlQ29udGVudF0gPSB1c2VTdGF0ZTxBY3RpdmVDb250ZW50PihudWxsKTtcbiAgY29uc3QgW2Vycm9yTWVzc2FnZSwgc2V0RXJyb3JNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IHVzZVN0YXRlKCdwbGFucycpO1xuICBjb25zdCBbY29uZmV0dGlUcmlnZ2VyLCBzZXRDb25mZXR0aVRyaWdnZXJdID0gdXNlU3RhdGU8Q29uZmV0dGlUcmlnZ2VyPihudWxsKTtcbiAgXG4gIC8vIFN0YXRlIGZvciBlZGl0aW5nIGNvbnRlbnRcbiAgY29uc3QgW2VkaXRpbmdJZCwgc2V0RWRpdGluZ0lkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbZWRpdGluZ1RpdGxlLCBzZXRFZGl0aW5nVGl0bGVdID0gdXNlU3RhdGUoJycpO1xuICBcbiAgLy8gU3RhdGUgZm9yIGRhdGEgaGlzdG9yeVxuICBjb25zdCBbcGxhbkhpc3RvcnksIHNldFBsYW5IaXN0b3J5XSA9IHVzZVN0YXRlPFN0b3JlZFBsYW5bXT4oW10pO1xuICBjb25zdCBbaXRpbmVyYXJ5SGlzdG9yeSwgc2V0SXRpbmVyYXJ5SGlzdG9yeV0gPSB1c2VTdGF0ZTxTdG9yZWRJdGluZXJhcnlbXT4oW10pO1xuXG4gIC8vIFN0YXRlIGZvciBhdXRoZW50aWNhdGlvbiBhbmQgc3lzdGVtIHNldHRpbmdzXG4gIGNvbnN0IHsgdXNlciwgaXNVc2VyTG9hZGluZyB9ID0gdXNlVXNlcigpO1xuICBjb25zdCBhdXRoID0gdXNlQXV0aCgpO1xuICBjb25zdCBbYXBwVGhlbWUsIHNldEFwcFRoZW1lXSA9IHVzZVN0YXRlPEFwcFRoZW1lPignbGlnaHQnKTtcbiAgY29uc3QgW2NvbG9yVGhlbWUsIHNldENvbG9yVGhlbWVdID0gdXNlU3RhdGU8Q29sb3JUaGVtZT4oJ3B1cnBsZScpO1xuICBjb25zdCBbaXNTZXR0aW5nc09wZW4sIHNldElzU2V0dGluZ3NPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzQXV0aERpYWxvZ09wZW4sIHNldElzQXV0aERpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbm90aWZpY2F0aW9uc0VuYWJsZWQsIHNldE5vdGlmaWNhdGlvbnNFbmFibGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgeyBpc0luc3RhbGxhYmxlLCBwcm9tcHRJbnN0YWxsIH0gPSB1c2VQV0FJbnN0YWxsKCk7XG5cbiAgLy8gUmVmcyBmb3IgbWVkaWEgYW5kIHJlY29yZGluZ1xuICBjb25zdCBtZWRpYVJlY29yZGVyUmVmID0gdXNlUmVmPE1lZGlhUmVjb3JkZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYXVkaW9DaHVua3NSZWYgPSB1c2VSZWY8QmxvYltdPihbXSk7XG4gIGNvbnN0IHJlY29yZGluZ01vZGVSZWYgPSB1c2VSZWY8UmVjb3JkaW5nTW9kZT4oJ25ld0NvbnRlbnQnKTtcbiAgY29uc3QgYWN0aXZlVGFza1JlZiA9IHVzZVJlZjxUYXNrIHwgbnVsbD4obnVsbCk7IFxuICBjb25zdCBhdWRpb1N0cmVhbSA9IHVzZVJlZjxNZWRpYVN0cmVhbSB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgZmlyZXN0b3JlID0gdXNlRmlyZXN0b3JlKCk7XG4gIFxuICAvLyAtLS0gU3RhcnQgb2YgRWZmZWN0cyAtLS1cbiAgXG4gIC8vIEFub255bW91cyBzaWduLWluIGVmZmVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNVc2VyTG9hZGluZyAmJiAhdXNlciAmJiBhdXRoKSB7XG4gICAgICAgIHNpZ25JbkFub255bW91c2x5KGF1dGgpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkFub255bW91cyBzaWduLWluIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgICAgICAgICAgICB0aXRsZTogXCJPZmZsaW5lIE1vZGVcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJDb3VsZCBub3QgY29ubmVjdCB0byBzeW5jIHNlcnZpY2VzLiBZb3VyIHdvcmsgd2lsbCBiZSBzYXZlZCBsb2NhbGx5LlwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfSwgW2lzVXNlckxvYWRpbmcsIHVzZXIsIGF1dGgsIHRvYXN0XSk7XG5cbiAgLy8gRGF0YSBGZXRjaGluZyBFZmZlY3QgKHRyaWdnZXJlZCBieSB1c2VyIGNoYW5nZSlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgZmV0Y2hIaXN0b3J5RnJvbUZpcmVzdG9yZSh1c2VyLnVpZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENsZWFyIGhpc3RvcnkgaWYgdXNlciBzaWducyBvdXRcbiAgICAgICAgICBzZXRQbGFuSGlzdG9yeShbXSk7XG4gICAgICAgICAgc2V0SXRpbmVyYXJ5SGlzdG9yeShbXSk7XG4gICAgICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3VzZXJdKTtcblxuICAvLyBUaGVtZSBFZmZlY3RzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc3RvcmVkVGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKSBhcyBBcHBUaGVtZSB8IG51bGw7XG4gICAgY29uc3QgcHJlZmVyc0RhcmsgPSB3aW5kb3cubWF0Y2hNZWRpYSAmJiB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpLm1hdGNoZXM7XG4gICAgY29uc3QgaW5pdGlhbFRoZW1lID0gc3RvcmVkVGhlbWUgfHwgKHByZWZlcnNEYXJrID8gJ2RhcmsnIDogJ2xpZ2h0Jyk7XG4gICAgc2V0QXBwVGhlbWUoaW5pdGlhbFRoZW1lKTtcbiAgICBcbiAgICBjb25zdCBzdG9yZWRDb2xvclRoZW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NvbG9yVGhlbWUnKSBhcyBDb2xvclRoZW1lIHwgbnVsbDtcbiAgICBpZiAoc3RvcmVkQ29sb3JUaGVtZSkgc2V0Q29sb3JUaGVtZShzdG9yZWRDb2xvclRoZW1lKTtcbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmsnLCAnbGlnaHQnKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChhcHBUaGVtZSk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgYXBwVGhlbWUpO1xuICB9LCBbYXBwVGhlbWVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgndGhlbWUtcHVycGxlJywgJ3RoZW1lLW1pbnQnLCAndGhlbWUtcmVkJywgJ3RoZW1lLWJsdWUnKTtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoYHRoZW1lLSR7Y29sb3JUaGVtZX1gKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY29sb3JUaGVtZScsIGNvbG9yVGhlbWUpO1xuICB9LCBbY29sb3JUaGVtZV0pO1xuXG5cbiAgLy8gLS0tIEVuZCBvZiBFZmZlY3RzIC0tLVxuXG4gIC8vIC0tLSBTdGFydCBvZiBIYW5kbGVycyAtLS1cblxuICBjb25zdCBoYW5kbGVTaWduVXAgPSBhc3luYyAodmFsdWVzOiB7IGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcgfSkgPT4ge1xuICAgIGlmICghYXV0aCkgcmV0dXJuIHsgZXJyb3I6IFwiQXV0aCBub3QgcmVhZHlcIiB9O1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChhdXRoLmN1cnJlbnRVc2VyICYmIGF1dGguY3VycmVudFVzZXIuaXNBbm9ueW1vdXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZhbHVlcy5lbWFpbCwgdmFsdWVzLnBhc3N3b3JkKTtcbiAgICAgICAgICAgIGF3YWl0IGxpbmtXaXRoQ3JlZGVudGlhbChhdXRoLmN1cnJlbnRVc2VyLCBjcmVkZW50aWFsKTtcbiAgICAgICAgICAgIHRvYXN0KHsgZGVzY3JpcHRpb246IFwiQWNjb3VudCBzdWNjZXNzZnVsbHkgbGlua2VkIVwiIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHsgdXNlcjogYXV0aC5jdXJyZW50VXNlciB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgdmFsdWVzLmVtYWlsLCB2YWx1ZXMucGFzc3dvcmQpO1xuICAgICAgICAgICAgdG9hc3QoeyBkZXNjcmlwdGlvbjogXCJXZWxjb21lISBZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZC5cIiB9KTtcbiAgICAgICAgICAgIHJldHVybiB7IHVzZXI6IHVzZXJDcmVkZW50aWFsLnVzZXIgfTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICB0b2FzdCh7IHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsIHRpdGxlOiAnU2lnbiBVcCBGYWlsZWQnLCBkZXNjcmlwdGlvbjogZS5tZXNzYWdlIH0pO1xuICAgICAgICByZXR1cm4geyBlcnJvcjogZS5tZXNzYWdlIH07XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNpZ25JbiA9IGFzeW5jICh2YWx1ZXM6IHsgZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyB9KSA9PiB7XG4gICAgaWYgKCFhdXRoKSByZXR1cm4geyBlcnJvcjogXCJBdXRoIG5vdCByZWFkeVwiIH07XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCB2YWx1ZXMuZW1haWwsIHZhbHVlcy5wYXNzd29yZCk7XG4gICAgICAgIHRvYXN0KHsgZGVzY3JpcHRpb246IFwiWW91J3JlIHNpZ25lZCBpbi5cIiB9KTtcbiAgICAgICAgcmV0dXJuIHsgdXNlcjogdXNlckNyZWRlbnRpYWwudXNlciB9O1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICB0b2FzdCh7IHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsIHRpdGxlOiAnU2lnbiBJbiBGYWlsZWQnLCBkZXNjcmlwdGlvbjogZS5tZXNzYWdlIH0pO1xuICAgICAgICByZXR1cm4geyBlcnJvcjogZS5tZXNzYWdlIH07XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNpZ25PdXQgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFhdXRoKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgc2lnbk91dChhdXRoKTtcbiAgICAgICAgdG9hc3QoeyBkZXNjcmlwdGlvbjogXCJZb3UgaGF2ZSBiZWVuIHNpZ25lZCBvdXQuXCIgfSk7XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICdTaWduIE91dCBGYWlsZWQnLCBkZXNjcmlwdGlvbjogZS5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHtcbiAgICBzZXRBcHBUaGVtZShwcmV2VGhlbWUgPT4gKHByZXZUaGVtZSA9PT0gJ2xpZ2h0JyA/ICdkYXJrJyA6ICdsaWdodCcpKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVOb3RpZmljYXRpb25Ub2dnbGUgPSBhc3luYyAoKSA9PiB7XG4gICAgIGlmICghKFwiTm90aWZpY2F0aW9uXCIgaW4gd2luZG93KSB8fCAhKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikpIHtcbiAgICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgZGVzY3JpcHRpb246IFwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgcHVzaCBub3RpZmljYXRpb25zLlwiIH0pO1xuICAgICAgICAgcmV0dXJuO1xuICAgICB9XG5cbiAgICAgaWYgKG5vdGlmaWNhdGlvbnNFbmFibGVkKSB7XG4gICAgICAgICB0b2FzdCh7IFxuICAgICAgICAgICAgIHRpdGxlOiBcIk5vdGlmaWNhdGlvbnMgYXJlIG1hbmFnZWQgaW4geW91ciBicm93c2VyXCIsXG4gICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVG8gdHVybiBvZmYgbm90aWZpY2F0aW9ucywgcGxlYXNlIG1hbmFnZSB0aGVtIGluIHlvdXIgYnJvd3NlciBvciBzeXN0ZW0gc2V0dGluZ3MuXCIsXG4gICAgICAgICB9KTtcbiAgICAgICAgIHJldHVybjtcbiAgICAgfVxuICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcGVybWlzc2lvbiA9IGF3YWl0IE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChwZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcpIHtcbiAgICAgICAgICAgICAgc2V0Tm90aWZpY2F0aW9uc0VuYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICAgIHRvYXN0KHsgZGVzY3JpcHRpb246IFwiTm90aWZpY2F0aW9ucyBoYXZlIGJlZW4gZW5hYmxlZC5cIiB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXROb3RpZmljYXRpb25zRW5hYmxlZChmYWxzZSk7XG4gICAgICAgICAgICAgIHRvYXN0KHsgXG4gICAgICAgICAgICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLCBcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlBlcm1pc3Npb24gRGVuaWVkXCIsXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3UndmUgZGlzYWJsZWQgbm90aWZpY2F0aW9ucy4gVG8gZW5hYmxlIHRoZW0sIHBsZWFzZSBnbyB0byB5b3VyIGJyb3dzZXIgc2V0dGluZ3MuXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXF1ZXN0aW5nIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uOlwiLCBlcnJvcilcbiAgICAgICAgICBzZXROb3RpZmljYXRpb25zRW5hYmxlZChmYWxzZSk7XG4gICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlcXVlc3RpbmcgcGVybWlzc2lvbnMuJyxcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgfTtcblxuICBjb25zdCBmZXRjaEhpc3RvcnlGcm9tRmlyZXN0b3JlID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFmaXJlc3RvcmUgfHwgIXVzZXIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZpcmVzdG9yZSBpcyBub3QgaW5pdGlhbGl6ZWQgb3IgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZC5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGxhblF1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihmaXJlc3RvcmUsIGB1c2Vycy8ke3VzZXJJZH0vcGxhbnNgKSwgb3JkZXJCeShcImNyZWF0ZWRBdFwiLCBcImRlc2NcIikpO1xuICAgICAgICBjb25zdCBwbGFuU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHBsYW5RdWVyeSk7XG4gICAgICAgIGNvbnN0IHBsYW5zID0gcGxhblNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiBkb2MuZGF0YSgpIGFzIFN0b3JlZFBsYW4pO1xuICAgICAgICBzZXRQbGFuSGlzdG9yeShwbGFucyk7XG5cbiAgICAgICAgY29uc3QgaXRpbmVyYXJ5UXVlcnkgPSBxdWVyeShjb2xsZWN0aW9uKGZpcmVzdG9yZSwgYHVzZXJzLyR7dXNlcklkfS9pdGluZXJhcmllc2ApLCBvcmRlckJ5KFwiY3JlYXRlZEF0XCIsIFwiZGVzY1wiKSk7XG4gICAgICAgIGNvbnN0IGl0aW5lcmFyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhpdGluZXJhcnlRdWVyeSk7XG4gICAgICAgIGNvbnN0IGl0aW5lcmFyaWVzID0gaXRpbmVyYXJ5U25hcHNob3QuZG9jcy5tYXAoZG9jID0+IGRvYy5kYXRhKCkgYXMgU3RvcmVkSXRpbmVyYXJ5KTtcbiAgICAgICAgc2V0SXRpbmVyYXJ5SGlzdG9yeShpdGluZXJhcmllcyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGhpc3RvcnkgZnJvbSBGaXJlc3RvcmU6IFwiLCBlcnJvcik7XG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgICAgICAgIHRpdGxlOiBcIkVycm9yIExvYWRpbmcgRGF0YVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiQ291bGQgbm90IGxvYWQgeW91ciBzYXZlZCBjb250ZW50LiBDaGVjayBGaXJlc3RvcmUgcnVsZXMuXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG5cbiAgY29uc3Qgc2F2ZVBsYW4gPSBhc3luYyAocGxhbjogU3RvcmVkUGxhbikgPT4ge1xuICAgIGNvbnN0IGlzTmV3UGxhbiA9ICFwbGFuSGlzdG9yeS5zb21lKHAgPT4gcC5pZCA9PT0gcGxhbi5pZCk7XG4gICAgaWYgKGlzTmV3UGxhbikge1xuICAgICAgICBzZXRQbGFuSGlzdG9yeShwcmV2ID0+IFtwbGFuLCAuLi5wcmV2XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2V0UGxhbkhpc3RvcnkocHJldiA9PiBwcmV2Lm1hcChwID0+IHAuaWQgPT09IHBsYW4uaWQgPyBwbGFuIDogcCkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoYWN0aXZlQ29udGVudD8udHlwZSA9PT0gJ3BsYW4nICYmIGFjdGl2ZUNvbnRlbnQuZGF0YS5pZCA9PT0gcGxhbi5pZCkge1xuICAgICAgICBzZXRBY3RpdmVDb250ZW50KHt0eXBlOiAncGxhbicsIGRhdGE6IHBsYW59KTtcbiAgICB9XG5cbiAgICBpZiAoIWZpcmVzdG9yZSB8fCAhdXNlcikgcmV0dXJuO1xuICAgIFxuICAgIC8vIFNhdmUgdG8gcHJpdmF0ZSB1c2VyIGNvbGxlY3Rpb25cbiAgICBjb25zdCB1c2VyUGxhblJlZiA9IGRvYyhmaXJlc3RvcmUsIGB1c2Vycy8ke3VzZXIudWlkfS9wbGFuc2AsIHBsYW4uaWQpO1xuICAgIHNldERvYyh1c2VyUGxhblJlZiwgcGxhbiwgeyBtZXJnZTogdHJ1ZSB9KS5jYXRjaChhc3luYyAoc2VydmVyRXJyb3IpID0+IHtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb25FcnJvciA9IG5ldyBGaXJlc3RvcmVQZXJtaXNzaW9uRXJyb3Ioe1xuICAgICAgICBwYXRoOiB1c2VyUGxhblJlZi5wYXRoLFxuICAgICAgICBvcGVyYXRpb246ICd3cml0ZScsXG4gICAgICAgIHJlcXVlc3RSZXNvdXJjZURhdGE6IHBsYW4sXG4gICAgICB9KTtcbiAgICAgIGVycm9yRW1pdHRlci5lbWl0KCdwZXJtaXNzaW9uLWVycm9yJywgcGVybWlzc2lvbkVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIFNhdmUgdG8gcHVibGljIHNoYXJlZCBjb2xsZWN0aW9uXG4gICAgY29uc3Qgc2hhcmVkUGxhblJlZiA9IGRvYyhmaXJlc3RvcmUsIGBzaGFyZWRfcGxhbnNgLCBwbGFuLmlkKTtcbiAgICBzZXREb2Moc2hhcmVkUGxhblJlZiwgcGxhbiwgeyBtZXJnZTogdHJ1ZSB9KS5jYXRjaChhc3luYyAoc2VydmVyRXJyb3IpID0+IHtcbiAgICAgICAgLy8gVGhpcyBlcnJvciBpcyBsZXNzIGNyaXRpY2FsIHRvIHRoZSB1c2VyLCBzbyB3ZSBjYW4gbG9nIGl0LlxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IHNhdmUgdG8gc2hhcmVkIGNvbGxlY3Rpb25cIiwgc2VydmVyRXJyb3IpO1xuICAgIH0pO1xuICB9XG4gIFxuICBjb25zdCBzYXZlSXRpbmVyYXJ5ID0gYXN5bmMgKGl0aW5lcmFyeTogU3RvcmVkSXRpbmVyYXJ5KSA9PiB7XG4gICAgY29uc3QgaXNOZXdJdGluZXJhcnkgPSAhaXRpbmVyYXJ5SGlzdG9yeS5zb21lKGkgPT4gaS5pZCA9PT0gaXRpbmVyYXJ5LmlkKTtcbiAgICAgaWYgKGlzTmV3SXRpbmVyYXJ5KSB7XG4gICAgICAgIHNldEl0aW5lcmFyeUhpc3RvcnkocHJldiA9PiBbaXRpbmVyYXJ5LCAuLi5wcmV2XSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SXRpbmVyYXJ5SGlzdG9yeShwcmV2ID0+IHByZXYubWFwKGkgPT4gaS5pZCA9PT0gaXRpbmVyYXJ5LmlkID8gaXRpbmVyYXJ5IDogaSkpO1xuICAgIH1cblxuICAgIGlmIChhY3RpdmVDb250ZW50Py50eXBlID09PSAnaXRpbmVyYXJ5JyAmJiBhY3RpdmVDb250ZW50LmRhdGEuaWQgPT09IGl0aW5lcmFyeS5pZCkge1xuICAgICAgICBzZXRBY3RpdmVDb250ZW50KHt0eXBlOiAnaXRpbmVyYXJ5JywgZGF0YTogaXRpbmVyYXJ5fSk7XG4gICAgfVxuXG4gICAgaWYgKCFmaXJlc3RvcmUgfHwgIXVzZXIpIHJldHVybjtcblxuICAgIC8vIFNhdmUgdG8gcHJpdmF0ZSB1c2VyIGNvbGxlY3Rpb25cbiAgICBjb25zdCB1c2VySXRpbmVyYXJ5UmVmID0gZG9jKGZpcmVzdG9yZSwgYHVzZXJzLyR7dXNlci51aWR9L2l0aW5lcmFyaWVzYCwgaXRpbmVyYXJ5LmlkKTtcbiAgICBzZXREb2ModXNlckl0aW5lcmFyeVJlZiwgaXRpbmVyYXJ5LCB7IG1lcmdlOiB0cnVlIH0pLmNhdGNoKGFzeW5jIChzZXJ2ZXJFcnJvcikgPT4ge1xuICAgICAgY29uc3QgcGVybWlzc2lvbkVycm9yID0gbmV3IEZpcmVzdG9yZVBlcm1pc3Npb25FcnJvcih7XG4gICAgICAgIHBhdGg6IHVzZXJJdGluZXJhcnlSZWYucGF0aCxcbiAgICAgICAgb3BlcmF0aW9uOiAnd3JpdGUnLFxuICAgICAgICByZXF1ZXN0UmVzb3VyY2VEYXRhOiBpdGluZXJhcnksXG4gICAgICB9KTtcbiAgICAgIGVycm9yRW1pdHRlci5lbWl0KCdwZXJtaXNzaW9uLWVycm9yJywgcGVybWlzc2lvbkVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIFNhdmUgdG8gcHVibGljIHNoYXJlZCBjb2xsZWN0aW9uXG4gICAgY29uc3Qgc2hhcmVkSXRpbmVyYXJ5UmVmID0gZG9jKGZpcmVzdG9yZSwgYHNoYXJlZF9pdGluZXJhcmllc2AsIGl0aW5lcmFyeS5pZCk7XG4gICAgc2V0RG9jKHNoYXJlZEl0aW5lcmFyeVJlZiwgaXRpbmVyYXJ5LCB7IG1lcmdlOiB0cnVlIH0pLmNhdGNoKGFzeW5jIChzZXJ2ZXJFcnJvcikgPT4ge1xuICAgICAgICAvLyBUaGlzIGVycm9yIGlzIGxlc3MgY3JpdGljYWwgdG8gdGhlIHVzZXIsIHNvIHdlIGNhbiBsb2cgaXQuXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3Qgc2F2ZSB0byBzaGFyZWQgY29sbGVjdGlvblwiLCBzZXJ2ZXJFcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBoYW5kbGVTdGFydFJlY29yZGluZyA9IGFzeW5jIChtb2RlOiBSZWNvcmRpbmdNb2RlLCB0YXNrPzogVGFzaykgPT4ge1xuICAgIHJlY29yZGluZ01vZGVSZWYuY3VycmVudCA9IG1vZGU7XG4gICAgaWYgKG1vZGUgPT09ICdzdWJ0YXNrJyAmJiB0YXNrKSB7XG4gICAgICAgIGFjdGl2ZVRhc2tSZWYuY3VycmVudCA9IHRhc2s7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aXZlVGFza1JlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICBpZiAobW9kZSA9PT0gJ25ld0NvbnRlbnQnKSBzZXRBY3RpdmVDb250ZW50KG51bGwpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUgfSk7XG4gICAgICBhdWRpb1N0cmVhbS5jdXJyZW50ID0gc3RyZWFtO1xuICAgICAgc2V0U3RhdHVzKCdyZWNvcmRpbmcnKTtcbiAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudCA9IG5ldyBNZWRpYVJlY29yZGVyKHN0cmVhbSk7XG4gICAgICBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcignZGF0YWF2YWlsYWJsZScsIChldmVudCkgPT4ge1xuICAgICAgICBhdWRpb0NodW5rc1JlZi5jdXJyZW50LnB1c2goZXZlbnQuZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudC5zdGFydCgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWNjZXNzaW5nIG1pY3JvcGhvbmU6JywgZXJyKTtcbiAgICAgIHNldEVycm9yTWVzc2FnZSgnTWljcm9waG9uZSBhY2Nlc3MgZGVuaWVkLiBQbGVhc2UgYWxsb3cgbWljcm9waG9uZSBhY2Nlc3MgaW4geW91ciBicm93c2VyIHNldHRpbmdzLicpO1xuICAgICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTdG9wUmVjb3JkaW5nID0gKCkgPT4ge1xuICAgIGlmIChtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCdzdG9wJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhdWRpb0Jsb2IgPSBuZXcgQmxvYihhdWRpb0NodW5rc1JlZi5jdXJyZW50LCB7IHR5cGU6ICdhdWRpby93ZWJtJyB9KTtcbiAgICAgICAgYXVkaW9DaHVua3NSZWYuY3VycmVudCA9IFtdO1xuXG4gICAgICAgIHNldFN0YXR1cygncHJvY2Vzc2luZycpO1xuICAgICAgICBpZiAoYXVkaW9TdHJlYW0uY3VycmVudCkge1xuICAgICAgICAgICAgYXVkaW9TdHJlYW0uY3VycmVudC5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICAgICAgICBhdWRpb1N0cmVhbS5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYXVkaW9CbG9iKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBhdWRpb0RhdGFVcmkgPSByZWFkZXIucmVzdWx0IGFzIHN0cmluZztcblxuICAgICAgICAgIHN3aXRjaCAocmVjb3JkaW5nTW9kZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjYXNlICduZXdDb250ZW50Jzoge1xuICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW5lcmF0ZUNvbnRlbnRGcm9tVm9pY2UoeyBhdWRpb0RhdGFVcmksIGNvbnRleHQ6IGFjdGl2ZUNvbnRlbnQ/LnR5cGUgfSk7XG4gICAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3JNZXNzYWdlKCdBbiB1bmV4cGVjdGVkIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuJyk7XG4gICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgICAgIHNldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IpOyBzZXRTdGF0dXMoJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmNvbnRlbnQ/LnR5cGUgPT09ICdwbGFuJyAmJiByZXN1bHQuY29udGVudC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvck1lc3NhZ2UoXCJZb3UgbXVzdCBiZSBsb2dnZWQgaW4gdG8gY3JlYXRlIGEgcGxhbi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGxhbjogU3RvcmVkUGxhbiA9IHsgLi4uKHJlc3VsdC5jb250ZW50LmRhdGEgYXMgR2VuZXJhdGVQbGFuRnJvbVRleHRPdXRwdXQpLCBpZDogYHBsYW4tJHtEYXRlLm5vdygpfWAsIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgdHJhbnNjcmlwdGlvbjogcmVzdWx0LnRyYW5zY3JpcHRpb24gfHwgJycsIHVzZXJJZDogdXNlci51aWQgfTtcbiAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZUNvbnRlbnQoe3R5cGU6ICdwbGFuJywgZGF0YTogbmV3UGxhbn0pO1xuICAgICAgICAgICAgICAgICAgc2F2ZVBsYW4obmV3UGxhbik7XG4gICAgICAgICAgICAgICAgICBzZXRTdGF0dXMoJ3N1Y2Nlc3MnKTsgc2V0QWN0aXZlVGFiKCdwbGFucycpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5jb250ZW50Py50eXBlID09PSAnaXRpbmVyYXJ5JyAmJiByZXN1bHQuY29udGVudC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvck1lc3NhZ2UoXCJZb3UgbXVzdCBiZSBsb2dnZWQgaW4gdG8gY3JlYXRlIGFuIGl0aW5lcmFyeS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SXRpbmVyYXJ5OiBTdG9yZWRJdGluZXJhcnkgPSB7IC4uLihyZXN1bHQuY29udGVudC5kYXRhIGFzIEdlbmVyYXRlSXRpbmVyYXJ5RnJvbVRleHRPdXRwdXQpLCBpZDogYGl0aW5lcmFyeS0ke0RhdGUubm93KCl9YCwgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCB0cmFuc2NyaXB0aW9uOiByZXN1bHQudHJhbnNjcmlwdGlvbiB8fCAnJywgdXNlcklkOiB1c2VyLnVpZCB9O1xuICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlQ29udGVudCh7dHlwZTogJ2l0aW5lcmFyeScsIGRhdGE6IG5ld0l0aW5lcmFyeX0pO1xuICAgICAgICAgICAgICAgICAgc2F2ZUl0aW5lcmFyeShuZXdJdGluZXJhcnkpO1xuICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdzdWNjZXNzJyk7IHNldEFjdGl2ZVRhYignaXRpbmVyYXJpZXMnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNldEVycm9yTWVzc2FnZShcIlNvcnJ5LCBJIGNvdWxkbid0IGRldGVybWluZSB3aGV0aGVyIHRvIGNyZWF0ZSBhIHBsYW4gb3IgYW4gaXRpbmVyYXJ5LiBQbGVhc2UgdHJ5IGFnYWluLlwiKTsgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAndXBkYXRlUGxhbic6IHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlQ29udGVudD8udHlwZSAhPT0gJ3BsYW4nKSBicmVhaztcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQbGFuRnJvbVZvaWNlKHsgYXVkaW9EYXRhVXJpLCBleGlzdGluZ1BsYW46IGFjdGl2ZUNvbnRlbnQuZGF0YSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvck1lc3NhZ2UoJ0FuIHVuZXhwZWN0ZWQgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci4nKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IpOyBzZXRTdGF0dXMoJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQudXBkYXRlZFBsYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFBsYW46IFN0b3JlZFBsYW4gPSB7IC4uLmFjdGl2ZUNvbnRlbnQuZGF0YSwgLi4ucmVzdWx0LnVwZGF0ZWRQbGFuLCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgdHJhbnNjcmlwdGlvbjogcmVzdWx0LnRyYW5zY3JpcHRpb24gfHwgJycgfTtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZVBsYW4odXBkYXRlZFBsYW4pO1xuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0dXMoJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICd1cGRhdGVJdGluZXJhcnknOiB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUNvbnRlbnQ/LnR5cGUgIT09ICdpdGluZXJhcnknKSBicmVhaztcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVJdGluZXJhcnlGcm9tVm9pY2UoeyBhdWRpb0RhdGFVcmksIGV4aXN0aW5nSXRpbmVyYXJ5OiBhY3RpdmVDb250ZW50LmRhdGEgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3JNZXNzYWdlKCdBbiB1bmV4cGVjdGVkIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuJyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXR1cygnZXJyb3InKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvck1lc3NhZ2UocmVzdWx0LmVycm9yKTsgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LnVwZGF0ZWRJdGluZXJhcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZEl0aW5lcmFyeTogU3RvcmVkSXRpbmVyYXJ5ID0geyAuLi5hY3RpdmVDb250ZW50LmRhdGEsIC4uLnJlc3VsdC51cGRhdGVkSXRpbmVyYXJ5LCB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgdHJhbnNjcmlwdGlvbjogcmVzdWx0LnRyYW5zY3JpcHRpb24gfHwgJycgfTtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUl0aW5lcmFyeSh1cGRhdGVkSXRpbmVyYXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnc3VidGFzayc6IHtcbiAgICAgICAgICAgICAgIGlmICghYWN0aXZlVGFza1JlZi5jdXJyZW50IHx8IGFjdGl2ZUNvbnRlbnQ/LnR5cGUgIT09ICdwbGFuJykgYnJlYWs7XG4gICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGRTdWJ0YXNrc0Zyb21Wb2ljZSh7IGF1ZGlvRGF0YVVyaSwgZXhpc3RpbmdUYXNrOiBhY3RpdmVUYXNrUmVmLmN1cnJlbnQgfSk7XG4gICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRFcnJvck1lc3NhZ2UoJ0FuIHVuZXhwZWN0ZWQgcmVzcG9uc2Ugd2FzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci4nKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIHNldEVycm9yTWVzc2FnZShyZXN1bHQuZXJyb3IpOyBzZXRTdGF0dXMoJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC51cGRhdGVkVGFzaykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbmV3QWN0aXZlUGxhbiA9IHsgLi4uYWN0aXZlQ29udGVudC5kYXRhIH07XG4gICAgICAgICAgICAgICAgICBuZXdBY3RpdmVQbGFuLmNhdGVnb3JpZXMgPSBuZXdBY3RpdmVQbGFuLmNhdGVnb3JpZXMubWFwKGMgPT4gKHsuLi5jLCB0YXNrczogYy50YXNrcy5tYXAodCA9PiB0LmlkID09PSByZXN1bHQudXBkYXRlZFRhc2s/LmlkID8gcmVzdWx0LnVwZGF0ZWRUYXNrIDogdCl9KSk7XG4gICAgICAgICAgICAgICAgICBuZXdBY3RpdmVQbGFuLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgIHNhdmVQbGFuKG5ld0FjdGl2ZVBsYW4pO1xuICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudC5zdG9wKCk7XG4gICAgfVxuICB9O1xuICBcblxuICBjb25zdCBoYW5kbGVUYXNrU3RhdHVzQ2hhbmdlID0gKGNhdGVnb3J5SW5kZXg6IG51bWJlciwgdGFza0luZGV4OiBudW1iZXIsIG5ld1N0YXR1czogVGFza1N0YXR1cykgPT4ge1xuICAgIGlmIChhY3RpdmVDb250ZW50Py50eXBlICE9PSAncGxhbicpIHJldHVybjtcbiAgICBjb25zdCB1cGRhdGVkUGxhbiA9IHsgLi4uYWN0aXZlQ29udGVudC5kYXRhIH07XG4gICAgY29uc3QgdGFzayA9IHVwZGF0ZWRQbGFuLmNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0udGFza3NbdGFza0luZGV4XTtcbiAgICBpZiAobmV3U3RhdHVzID09PSAnRG9uZScgJiYgdGFzay5zdGF0dXMgIT09ICdEb25lJykgc2V0Q29uZmV0dGlUcmlnZ2VyKHsgaWQ6IHRhc2suaWQsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KTtcbiAgICB0YXNrLnN0YXR1cyA9IG5ld1N0YXR1cztcbiAgICB1cGRhdGVkUGxhbi51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgc2F2ZVBsYW4odXBkYXRlZFBsYW4pO1xuICB9O1xuICBcbiAgY29uc3QgaGFuZGxlU3ViVGFza1N0YXR1c0NoYW5nZSA9IChjYXRlZ29yeUluZGV4OiBudW1iZXIsIHRhc2tJbmRleDogbnVtYmVyLCBzdWJUYXNrSW5kZXg6IG51bWJlciwgY29tcGxldGVkOiBib29sZWFuKSA9PiB7XG4gICAgaWYgKGFjdGl2ZUNvbnRlbnQ/LnR5cGUgIT09ICdwbGFuJykgcmV0dXJuO1xuICAgIGNvbnN0IHVwZGF0ZWRQbGFuID0geyAuLi5hY3RpdmVDb250ZW50LmRhdGEgfTtcbiAgICBpZiAodXBkYXRlZFBsYW4uY2F0ZWdvcmllc1tjYXRlZ29yeUluZGV4XS50YXNrc1t0YXNrSW5kZXhdLnN1YnRhc2tzKSB7XG4gICAgICAgIGNvbnN0IHN1YnRhc2sgPSB1cGRhdGVkUGxhbi5jYXRlZ29yaWVzW2NhdGVnb3J5SW5kZXhdLnRhc2tzW3Rhc2tJbmRleF0uc3VidGFza3MhW3N1YlRhc2tJbmRleF07XG4gICAgICAgIGlmKGNvbXBsZXRlZCAmJiAhc3VidGFzay5jb21wbGV0ZWQpIHNldENvbmZldHRpVHJpZ2dlcih7IGlkOiBzdWJ0YXNrLmlkLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSk7XG4gICAgICAgIHN1YnRhc2suY29tcGxldGVkID0gY29tcGxldGVkO1xuICAgICAgICB1cGRhdGVkUGxhbi51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIHNhdmVQbGFuKHVwZGF0ZWRQbGFuKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRWRpdFRpdGxlID0gKGNvbnRlbnQ6IFN0b3JlZFBsYW4gfCBTdG9yZWRJdGluZXJhcnkpID0+IHtcbiAgICBzZXRFZGl0aW5nSWQoY29udGVudC5pZCk7IHNldEVkaXRpbmdUaXRsZShjb250ZW50LnRpdGxlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVTYXZlVGl0bGUgPSAoKSA9PiB7XG4gICAgaWYgKCFlZGl0aW5nSWQpIHJldHVybjtcbiAgICBpZihhY3RpdmVUYWIgPT09ICdwbGFucycgJiYgYWN0aXZlQ29udGVudD8udHlwZSA9PT0gJ3BsYW4nKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQbGFuID0geyAuLi5hY3RpdmVDb250ZW50LmRhdGEsIHRpdGxlOiBlZGl0aW5nVGl0bGUsIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07XG4gICAgICAgIHNhdmVQbGFuKHVwZGF0ZWRQbGFuKTtcbiAgICB9IGVsc2UgaWYgKGFjdGl2ZVRhYiA9PT0gJ2l0aW5lcmFyaWVzJyAmJiBhY3RpdmVDb250ZW50Py50eXBlID09PSAnaXRpbmVyYXJ5Jykge1xuICAgICAgICBjb25zdCB1cGRhdGVkSXRpbmVyYXJ5ID0geyAuLi5hY3RpdmVDb250ZW50LmRhdGEsIHRpdGxlOiBlZGl0aW5nVGl0bGUsIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07XG4gICAgICAgIHNhdmVJdGluZXJhcnkodXBkYXRlZEl0aW5lcmFyeSk7XG4gICAgfVxuICAgIHNldEVkaXRpbmdJZChudWxsKTsgc2V0RWRpdGluZ1RpdGxlKCcnKTtcbiAgfTtcblxuICBjb25zdCByZXNldFRvSWRsZSA9ICgpID0+IHtcbiAgICBzZXRTdGF0dXMoJ2lkbGUnKTsgc2V0QWN0aXZlQ29udGVudChudWxsKTsgc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgfTtcbiAgXG4gIGNvbnN0IGhhbmRsZVNlbGVjdFBsYW5Gcm9tSGlzdG9yeSA9IChwbGFuOiBTdG9yZWRQbGFuKSA9PiB7XG4gICAgc2V0QWN0aXZlQ29udGVudCh7dHlwZTogJ3BsYW4nLCBkYXRhOiBwbGFufSk7IHNldFN0YXR1cygnc3VjY2VzcycpOyBzZXRBY3RpdmVUYWIoJ3BsYW5zJyk7XG4gIH1cblxuICBjb25zdCBoYW5kbGVTZWxlY3RJdGluZXJhcnlGcm9tSGlzdG9yeSA9IChpdGluZXJhcnk6IFN0b3JlZEl0aW5lcmFyeSkgPT4ge1xuICAgIHNldEFjdGl2ZUNvbnRlbnQoe3R5cGU6ICdpdGluZXJhcnknLCBkYXRhOiBpdGluZXJhcnl9KTsgc2V0U3RhdHVzKCdzdWNjZXNzJyk7IHNldEFjdGl2ZVRhYignaXRpbmVyYXJpZXMnKTtcbiAgfVxuICBcbiAgY29uc3QgaGFuZGxlRGVsZXRlUGxhbiA9IGFzeW5jIChlOiBSZWFjdC5Nb3VzZUV2ZW50LCBwbGFuSWQ6IHN0cmluZykgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgaWYgKCFmaXJlc3RvcmUgfHwgIXVzZXIpIHJldHVybjtcblxuICAgIHNldFBsYW5IaXN0b3J5KHByZXYgPT4gcHJldi5maWx0ZXIocCA9PiBwLmlkICE9PSBwbGFuSWQpKTtcbiAgICBpZiAoYWN0aXZlQ29udGVudD8uZGF0YS5pZCA9PT0gcGxhbklkKSByZXNldFRvSWRsZSgpO1xuICAgIFxuICAgIGNvbnN0IHBsYW5SZWYgPSBkb2MoZmlyZXN0b3JlLCBgdXNlcnMvJHt1c2VyLnVpZH0vcGxhbnNgLCBwbGFuSWQpO1xuICAgIGRlbGV0ZURvYyhwbGFuUmVmKS5jYXRjaChhc3luYyAoc2VydmVyRXJyb3IpID0+IHtcbiAgICAgICAgaWYodXNlcikgZmV0Y2hIaXN0b3J5RnJvbUZpcmVzdG9yZSh1c2VyLnVpZCk7IC8vIFJlZmV0Y2ggdG8gcmVzdG9yZSBvcHRpbWlzdGljIHVwZGF0ZVxuICAgICAgICBjb25zdCBwZXJtaXNzaW9uRXJyb3IgPSBuZXcgRmlyZXN0b3JlUGVybWlzc2lvbkVycm9yKHtcbiAgICAgICAgICAgIHBhdGg6IHBsYW5SZWYucGF0aCxcbiAgICAgICAgICAgIG9wZXJhdGlvbjogJ2RlbGV0ZScsXG4gICAgICAgIH0pO1xuICAgICAgICBlcnJvckVtaXR0ZXIuZW1pdCgncGVybWlzc2lvbi1lcnJvcicsIHBlcm1pc3Npb25FcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBoYW5kbGVEZWxldGVJdGluZXJhcnkgPSBhc3luYyAoZTogUmVhY3QuTW91c2VFdmVudCwgaXRpbmVyYXJ5SWQ6IHN0cmluZykgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgaWYgKCFmaXJlc3RvcmUgfHwgIXVzZXIpIHJldHVybjtcbiAgICBcbiAgICBzZXRJdGluZXJhcnlIaXN0b3J5KHByZXYgPT4gcHJldi5maWx0ZXIoaSA9PiBpLmlkICE9PSBpdGluZXJhcnlJZCkpO1xuICAgIGlmIChhY3RpdmVDb250ZW50Py5kYXRhLmlkID09PSBpdGluZXJhcnlJZCkgcmVzZXRUb0lkbGUoKTtcblxuICAgIGNvbnN0IGl0aW5lcmFyeVJlZiA9IGRvYyhmaXJlc3RvcmUsIGB1c2Vycy8ke3VzZXIudWlkfS9pdGluZXJhcmllc2AsIGl0aW5lcmFyeUlkKTtcbiAgICBkZWxldGVEb2MoaXRpbmVyYXJ5UmVmKS5jYXRjaChhc3luYyAoc2VydmVyRXJyb3IpID0+IHtcbiAgICAgICAgaWYodXNlcikgZmV0Y2hIaXN0b3J5RnJvbUZpcmVzdG9yZSh1c2VyLnVpZCk7IC8vIFJlZmV0Y2ggdG8gcmVzdG9yZSBvcHRpbWlzdGljIHVwZGF0ZVxuICAgICAgICBjb25zdCBwZXJtaXNzaW9uRXJyb3IgPSBuZXcgRmlyZXN0b3JlUGVybWlzc2lvbkVycm9yKHtcbiAgICAgICAgICAgIHBhdGg6IGl0aW5lcmFyeVJlZi5wYXRoLFxuICAgICAgICAgICAgb3BlcmF0aW9uOiAnZGVsZXRlJyxcbiAgICAgICAgfSk7XG4gICAgICAgIGVycm9yRW1pdHRlci5lbWl0KCdwZXJtaXNzaW9uLWVycm9yJywgcGVybWlzc2lvbkVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmICghZmlyZXN0b3JlIHx8ICFhdXRoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWluLWgtc2NyZWVuIHctZnVsbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTQgaC00IHJvdW5kZWQtZnVsbCBiZy1wcmltYXJ5IGFuaW1hdGUtcHVsc2VcIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy00IGgtNCByb3VuZGVkLWZ1bGwgYmctcHJpbWFyeSBhbmltYXRlLXB1bHNlIFthbmltYXRpb24tZGVsYXk6MC4yc11cIj48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy00IGgtNCByb3VuZGVkLWZ1bGwgYmctcHJpbWFyeSBhbmltYXRlLXB1bHNlIFthbmltYXRpb24tZGVsYXk6MC40c11cIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+SW5pdGlhbGl6aW5nLi4uPC9wPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPE1haW5MYXlvdXRcbiAgICAgIHVzZXI9e3VzZXJ9XG4gICAgICBpc0F1dGhSZWFkeT17IWlzVXNlckxvYWRpbmd9XG4gICAgICBwbGFuSGlzdG9yeT17cGxhbkhpc3Rvcnl9XG4gICAgICBpdGluZXJhcnlIaXN0b3J5PXtpdGluZXJhcnlIaXN0b3J5fVxuICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XG4gICAgICBzZXRBY3RpdmVUYWI9e3NldEFjdGl2ZVRhYn1cbiAgICAgIG9uU2VsZWN0UGxhbj17aGFuZGxlU2VsZWN0UGxhbkZyb21IaXN0b3J5fVxuICAgICAgb25TZWxlY3RJdGluZXJhcnk9e2hhbmRsZVNlbGVjdEl0aW5lcmFyeUZyb21IaXN0b3J5fVxuICAgICAgb25EZWxldGVQbGFuPXtoYW5kbGVEZWxldGVQbGFufVxuICAgICAgb25EZWxldGVJdGluZXJhcnk9e2hhbmRsZURlbGV0ZUl0aW5lcmFyeX1cbiAgICAgIGFwcFRoZW1lPXthcHBUaGVtZX1cbiAgICAgIHRvZ2dsZVRoZW1lPXt0b2dnbGVUaGVtZX1cbiAgICAgIGNvbG9yVGhlbWU9e2NvbG9yVGhlbWV9XG4gICAgICBzZXRDb2xvclRoZW1lPXtzZXRDb2xvclRoZW1lfVxuICAgICAgaXNTZXR0aW5nc09wZW49e2lzU2V0dGluZ3NPcGVufVxuICAgICAgc2V0SXNTZXR0aW5nc09wZW49e3NldElzU2V0dGluZ3NPcGVufVxuICAgICAgaXNBdXRoRGlhbG9nT3Blbj17aXNBdXRoRGlhbG9nT3Blbn1cbiAgICAgIHNldElzQXV0aERpYWxvZ09wZW49e3NldElzQXV0aERpYWxvZ09wZW59XG4gICAgICBub3RpZmljYXRpb25zRW5hYmxlZD17bm90aWZpY2F0aW9uc0VuYWJsZWR9XG4gICAgICBvbk5vdGlmaWNhdGlvblRvZ2dsZT17aGFuZGxlTm90aWZpY2F0aW9uVG9nZ2xlfVxuICAgICAgaXNJbnN0YWxsYWJsZT17aXNJbnN0YWxsYWJsZX1cbiAgICAgIG9uSW5zdGFsbD17cHJvbXB0SW5zdGFsbH1cbiAgICAgIHN0YXR1cz17c3RhdHVzfVxuICAgICAgYWN0aXZlQ29udGVudD17YWN0aXZlQ29udGVudH1cbiAgICAgIGVycm9yTWVzc2FnZT17ZXJyb3JNZXNzYWdlfVxuICAgICAgc2V0U3RhdHVzPXtzZXRTdGF0dXN9XG4gICAgICByZWNvcmRpbmdNb2RlUmVmPXtyZWNvcmRpbmdNb2RlUmVmfVxuICAgICAgaGFuZGxlU3RvcFJlY29yZGluZz17aGFuZGxlU3RvcFJlY29yZGluZ31cbiAgICAgIGhhbmRsZVN0YXJ0UmVjb3JkaW5nPXtoYW5kbGVTdGFydFJlY29yZGluZ31cbiAgICAgIGF1ZGlvU3RyZWFtPXthdWRpb1N0cmVhbS5jdXJyZW50fVxuICAgICAgaGFuZGxlVGFza1N0YXR1c0NoYW5nZT17aGFuZGxlVGFza1N0YXR1c0NoYW5nZX1cbiAgICAgIGhhbmRsZVN1YlRhc2tTdGF0dXNDaGFuZ2U9e2hhbmRsZVN1YlRhc2tTdGF0dXNDaGFuZ2V9XG4gICAgICBlZGl0aW5nSWQ9e2VkaXRpbmdJZH1cbiAgICAgIGVkaXRpbmdUaXRsZT17ZWRpdGluZ1RpdGxlfVxuICAgICAgc2V0RWRpdGluZ1RpdGxlPXtzZXRFZGl0aW5nVGl0bGV9XG4gICAgICBoYW5kbGVFZGl0VGl0bGU9e2hhbmRsZUVkaXRUaXRsZX1cbiAgICAgIGhhbmRsZVNhdmVUaXRsZT17aGFuZGxlU2F2ZVRpdGxlfVxuICAgICAgcmVzZXRUb0lkbGU9e3Jlc2V0VG9JZGxlfVxuICAgICAgdG9hc3Q9e3RvYXN0fVxuICAgICAgY29uZmV0dGlUcmlnZ2VyPXtjb25mZXR0aVRyaWdnZXJ9XG4gICAgICBzYXZlSXRpbmVyYXJ5PXtzYXZlSXRpbmVyYXJ5fVxuICAgICAgb25TaWduVXA9e2hhbmRsZVNpZ25VcH1cbiAgICAgIG9uU2lnbkluPXtoYW5kbGVTaWduSW59XG4gICAgICBvblNpZ25PdXQ9e2hhbmRsZVNpZ25PdXR9XG4gICAgLz5cbiAgKTtcbn1cblxuICAgICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsInVzZVRvYXN0IiwiYWRkU3VidGFza3NGcm9tVm9pY2UiLCJ1cGRhdGVQbGFuRnJvbVZvaWNlIiwidXBkYXRlSXRpbmVyYXJ5RnJvbVZvaWNlIiwiZ2VuZXJhdGVDb250ZW50RnJvbVZvaWNlIiwiTWFpbkxheW91dCIsInVzZUZpcmVzdG9yZSIsInVzZVVzZXIiLCJlcnJvckVtaXR0ZXIiLCJGaXJlc3RvcmVQZXJtaXNzaW9uRXJyb3IiLCJjb2xsZWN0aW9uIiwiZG9jIiwic2V0RG9jIiwiZGVsZXRlRG9jIiwicXVlcnkiLCJvcmRlckJ5IiwiZ2V0RG9jcyIsInVzZVBXQUluc3RhbGwiLCJzaWduSW5Bbm9ueW1vdXNseSIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbk91dCIsImxpbmtXaXRoQ3JlZGVudGlhbCIsIkVtYWlsQXV0aFByb3ZpZGVyIiwidXNlQXV0aCIsIkhvbWVQYWdlQ29udGVudCIsInN0YXR1cyIsInNldFN0YXR1cyIsImFjdGl2ZUNvbnRlbnQiLCJzZXRBY3RpdmVDb250ZW50IiwiZXJyb3JNZXNzYWdlIiwic2V0RXJyb3JNZXNzYWdlIiwiYWN0aXZlVGFiIiwic2V0QWN0aXZlVGFiIiwiY29uZmV0dGlUcmlnZ2VyIiwic2V0Q29uZmV0dGlUcmlnZ2VyIiwiZWRpdGluZ0lkIiwic2V0RWRpdGluZ0lkIiwiZWRpdGluZ1RpdGxlIiwic2V0RWRpdGluZ1RpdGxlIiwicGxhbkhpc3RvcnkiLCJzZXRQbGFuSGlzdG9yeSIsIml0aW5lcmFyeUhpc3RvcnkiLCJzZXRJdGluZXJhcnlIaXN0b3J5IiwidXNlciIsImlzVXNlckxvYWRpbmciLCJhdXRoIiwiYXBwVGhlbWUiLCJzZXRBcHBUaGVtZSIsImNvbG9yVGhlbWUiLCJzZXRDb2xvclRoZW1lIiwiaXNTZXR0aW5nc09wZW4iLCJzZXRJc1NldHRpbmdzT3BlbiIsImlzQXV0aERpYWxvZ09wZW4iLCJzZXRJc0F1dGhEaWFsb2dPcGVuIiwibm90aWZpY2F0aW9uc0VuYWJsZWQiLCJzZXROb3RpZmljYXRpb25zRW5hYmxlZCIsImlzSW5zdGFsbGFibGUiLCJwcm9tcHRJbnN0YWxsIiwibWVkaWFSZWNvcmRlclJlZiIsImF1ZGlvQ2h1bmtzUmVmIiwicmVjb3JkaW5nTW9kZVJlZiIsImFjdGl2ZVRhc2tSZWYiLCJhdWRpb1N0cmVhbSIsInRvYXN0IiwiZmlyZXN0b3JlIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIiwidmFyaWFudCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJmZXRjaEhpc3RvcnlGcm9tRmlyZXN0b3JlIiwidWlkIiwic3RvcmVkVGhlbWUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicHJlZmVyc0RhcmsiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImluaXRpYWxUaGVtZSIsInN0b3JlZENvbG9yVGhlbWUiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInNldEl0ZW0iLCJib2R5IiwiaGFuZGxlU2lnblVwIiwidmFsdWVzIiwiY3VycmVudFVzZXIiLCJpc0Fub255bW91cyIsImNyZWRlbnRpYWwiLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlckNyZWRlbnRpYWwiLCJlIiwibWVzc2FnZSIsImhhbmRsZVNpZ25JbiIsImhhbmRsZVNpZ25PdXQiLCJ0b2dnbGVUaGVtZSIsInByZXZUaGVtZSIsImhhbmRsZU5vdGlmaWNhdGlvblRvZ2dsZSIsIm5hdmlnYXRvciIsInBlcm1pc3Npb24iLCJOb3RpZmljYXRpb24iLCJyZXF1ZXN0UGVybWlzc2lvbiIsInVzZXJJZCIsInBsYW5RdWVyeSIsInBsYW5TbmFwc2hvdCIsInBsYW5zIiwiZG9jcyIsIm1hcCIsImRhdGEiLCJpdGluZXJhcnlRdWVyeSIsIml0aW5lcmFyeVNuYXBzaG90IiwiaXRpbmVyYXJpZXMiLCJzYXZlUGxhbiIsInBsYW4iLCJpc05ld1BsYW4iLCJzb21lIiwicCIsImlkIiwicHJldiIsInR5cGUiLCJ1c2VyUGxhblJlZiIsIm1lcmdlIiwic2VydmVyRXJyb3IiLCJwZXJtaXNzaW9uRXJyb3IiLCJwYXRoIiwib3BlcmF0aW9uIiwicmVxdWVzdFJlc291cmNlRGF0YSIsImVtaXQiLCJzaGFyZWRQbGFuUmVmIiwic2F2ZUl0aW5lcmFyeSIsIml0aW5lcmFyeSIsImlzTmV3SXRpbmVyYXJ5IiwiaSIsInVzZXJJdGluZXJhcnlSZWYiLCJzaGFyZWRJdGluZXJhcnlSZWYiLCJoYW5kbGVTdGFydFJlY29yZGluZyIsIm1vZGUiLCJ0YXNrIiwiY3VycmVudCIsInN0cmVhbSIsIm1lZGlhRGV2aWNlcyIsImdldFVzZXJNZWRpYSIsImF1ZGlvIiwiTWVkaWFSZWNvcmRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInB1c2giLCJzdGFydCIsImVyciIsImhhbmRsZVN0b3BSZWNvcmRpbmciLCJhdWRpb0Jsb2IiLCJCbG9iIiwiZ2V0VHJhY2tzIiwiZm9yRWFjaCIsInRyYWNrIiwic3RvcCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJyZWFkQXNEYXRhVVJMIiwib25sb2FkZW5kIiwiYXVkaW9EYXRhVXJpIiwicmVzdWx0IiwiY29udGV4dCIsImNvbnRlbnQiLCJuZXdQbGFuIiwiRGF0ZSIsIm5vdyIsImNyZWF0ZWRBdCIsInRvSVNPU3RyaW5nIiwidXBkYXRlZEF0IiwidHJhbnNjcmlwdGlvbiIsIm5ld0l0aW5lcmFyeSIsImV4aXN0aW5nUGxhbiIsInVwZGF0ZWRQbGFuIiwiZXhpc3RpbmdJdGluZXJhcnkiLCJ1cGRhdGVkSXRpbmVyYXJ5IiwiZXhpc3RpbmdUYXNrIiwidXBkYXRlZFRhc2siLCJuZXdBY3RpdmVQbGFuIiwiY2F0ZWdvcmllcyIsImMiLCJ0YXNrcyIsInQiLCJoYW5kbGVUYXNrU3RhdHVzQ2hhbmdlIiwiY2F0ZWdvcnlJbmRleCIsInRhc2tJbmRleCIsIm5ld1N0YXR1cyIsInRpbWVzdGFtcCIsImhhbmRsZVN1YlRhc2tTdGF0dXNDaGFuZ2UiLCJzdWJUYXNrSW5kZXgiLCJjb21wbGV0ZWQiLCJzdWJ0YXNrcyIsInN1YnRhc2siLCJoYW5kbGVFZGl0VGl0bGUiLCJoYW5kbGVTYXZlVGl0bGUiLCJyZXNldFRvSWRsZSIsImhhbmRsZVNlbGVjdFBsYW5Gcm9tSGlzdG9yeSIsImhhbmRsZVNlbGVjdEl0aW5lcmFyeUZyb21IaXN0b3J5IiwiaGFuZGxlRGVsZXRlUGxhbiIsInBsYW5JZCIsInN0b3BQcm9wYWdhdGlvbiIsImZpbHRlciIsInBsYW5SZWYiLCJoYW5kbGVEZWxldGVJdGluZXJhcnkiLCJpdGluZXJhcnlJZCIsIml0aW5lcmFyeVJlZiIsImRpdiIsImNsYXNzTmFtZSIsImlzQXV0aFJlYWR5Iiwib25TZWxlY3RQbGFuIiwib25TZWxlY3RJdGluZXJhcnkiLCJvbkRlbGV0ZVBsYW4iLCJvbkRlbGV0ZUl0aW5lcmFyeSIsIm9uTm90aWZpY2F0aW9uVG9nZ2xlIiwib25JbnN0YWxsIiwib25TaWduVXAiLCJvblNpZ25JbiIsIm9uU2lnbk91dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/HomePageContent.tsx\n"));

/***/ })

});